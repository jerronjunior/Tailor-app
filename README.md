# Tailor App

A production-ready Flutter mobile application connecting **Customers** with **Tailors**. Built with Clean Architecture, Firebase, Riverpod, and GoRouter.

## Features

### Authentication
- Separate login & register for Customer and Tailor
- Email & password authentication
- User role stored in Firestore; redirect by role after login
- Forgot password, logout

### Customer
- Browse and search tailors (filter by availability)
- View tailor profile and reviews
- Place order: dress type, color, measurements, reference image, delivery date
- Save measurement profiles
- Order history and status tracking (Measuring → Cutting → Stitching → Finishing → Ready)
- Real-time chat with tailor
- Rate and review tailor

### Tailor
- View incoming orders; accept/reject
- Update order status through workflow
- Chat with customer
- Earnings summary (completed orders)
- Toggle availability (Available / Not Available)

## Tech Stack

- **Flutter** (latest stable) with null safety
- **Firebase**: Auth, Cloud Firestore, Storage, Cloud Messaging (FCM)
- **State**: Riverpod
- **Navigation**: GoRouter
- **UI**: Material 3, responsive layout

## Project Structure (Clean Architecture)

```
lib/
├── core/
│   ├── constants/     # App constants, collection names, status enums
│   ├── router/        # GoRouter config, route names
│   └── theme/         # Material 3 light/dark theme
├── data/
│   ├── models/        # User, Order, Review, Message, MeasurementProfile
│   └── services/      # Auth, Firestore, Storage, Chat, FCM
├── features/
│   ├── auth/          # Role select, login, register, forgot password, providers
│   ├── customer/      # Home, tailor list/profile, place order, orders, chat, measurements
│   └── tailor/        # Home, orders, chat, earnings, availability
├── firebase_options.dart  # Generated by FlutterFire CLI
└── main.dart
```

## Setup

1. **Clone and install**
   ```bash
   cd "Tailor app"
   flutter pub get
   ```

2. **Firebase**
   - Create a project at [Firebase Console](https://console.firebase.google.com).
   - Install [FlutterFire CLI](https://firebase.flutter.dev/docs/overview):  
     `dart pub global activate flutterfire_cli`
   - From the project root run:  
     `flutterfire configure`  
   - This generates `lib/firebase_options.dart` and configures Android/iOS.

3. **Firestore**
   - Enable **Cloud Firestore** and **Authentication** (Email/Password).
   - Optional: add [Security Rules](https://firebase.google.com/docs/firestore/security/get-started) and indexes when prompted by the app (e.g. for `reviews` by `tailorId` + `createdAt`, `orders` by `customerId`/`tailorId` + `createdAt`).

4. **Storage & FCM**
   - Enable **Storage** for reference images and profile pictures.
   - Enable **Cloud Messaging** for push notifications (optional).

5. **Run**
   ```bash
   flutter run
   ```

## Firestore Collections

- **users** – id, name, email, role, phone, profileImage, createdAt, isAvailable (tailors)
- **orders** – id, customerId, tailorId, dressType, color, measurements, referenceImage, deliveryDate, status, price, createdAt
- **reviews** – id, customerId, tailorId, rating, comment, createdAt
- **chats** – document id = `{userId1}_{userId2}` (sorted); subcollection **messages** – chatId, senderId, message, imageUrl, timestamp

Measurement profiles are stored under `users/{userId}/measurement_profiles`.

## Deliverables Checklist

- [x] Clean folder structure
- [x] Models: User, Order, Review, Message, MeasurementProfile
- [x] Authentication flow with role-based redirect
- [x] Firestore service (users, orders, reviews, measurement profiles)
- [x] Order management (create, accept/reject, status updates)
- [x] Chat system (chatId from two user ids, messages subcollection)
- [x] Customer UI: dashboard, tailors, profile, place order, orders, chat, measurements
- [x] Tailor UI: dashboard, orders, chat, earnings, availability
- [x] Error handling, loading states, form validation
- [x] Material 3 theme and responsive layout

## License

MIT.
